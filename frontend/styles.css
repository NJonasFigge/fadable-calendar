
@import url("https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap");


:root {
    /* Dark mode is default */
    --primary-text-color: #f9f9f9;
    --secondary-text-color: #cccccc;
    --tertiary-text-color: #778190;

    --primary-bg-color: #1f232a;
    --secondary-bg-color: #323844;

    --primary-overlay-color: #000;
    --secondary-overlay-color: #fff;

    --event-row-height: 1.6rem;

    --text-color-dimming: 60%;
    --text-color-neutral: var(--tertiary-text-color);
    --text-color-success: color-mix(in srgb, var(--tertiary-text-color) var(--text-color-dimming), #6edc84);
    --text-color-info: color-mix(in srgb, var(--tertiary-text-color) var(--text-color-dimming), #77b8ff);
    --text-color-warning: color-mix(in srgb, var(--tertiary-text-color) var(--text-color-dimming), #f1c86a);
    --text-color-danger: color-mix(in srgb, var(--tertiary-text-color) var(--text-color-dimming), #f28b82);
}


/*
d888888b db    db d8888b.  .d88b.   d888b  d8888b.  .d8b.  d8888b. db   db db    db 
`~~88~~' `8b  d8' 88  `8D .8P  Y8. 88' Y8b 88  `8D d8' `8b 88  `8D 88   88 `8b  d8' 
   88     `8bd8'  88oodD' 88    88 88      88oobY' 88ooo88 88oodD' 88ooo88  `8bd8'  
   88       88    88~~~   88    88 88  ooo 88`8b   88~~~88 88~~~   88~~~88    88    
   88       88    88      `8b  d8' 88. ~8~ 88 `88. 88   88 88      88   88    88    
   YP       YP    88       `Y88P'   Y888P  88   YD YP   YP 88      YP   YP    YP           
*/

body {
    font-family: 'Nunito', sans-serif;
    font-size: 16px;
    line-height: 1.5;
}


/*
db       .d8b.  db    db  .d88b.  db    db d888888b 
88      d8' `8b `8b  d8' .8P  Y8. 88    88 `~~88~~' 
88      88ooo88  `8bd8'  88    88 88    88    88    
88      88~~~88    88    88    88 88    88    88    
88booo. 88   88    88    `8b  d8' 88b  d88    88    
Y88888P YP   YP    YP     `Y88P'  ~Y8888P'    YP    
*/

body {
    scroll-behavior: smooth;
    margin: 0;
    padding: 0;
}

#calendar-container {
    height: 100vh;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}

#calendar-scrollview {
    width: min(1000px, 100vw);
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
}

#calendar-scrollview::-webkit-scrollbar {
    width: 0;
    height: 0;
}

.scroll-to-today {
    position: absolute;
    left: 50%;
    bottom: 24px;
    z-index: 10;
    padding: 0.6rem 1.1rem;
}

.scroll-buffer {
    height: 40px;
    border: none;
    box-shadow: none;
    background: transparent;
}

.week-loading {
    width: 90%;
    height: calc(548.8px - 2rem - 2rem);  /* Container height (empirically determined) minus margins and padding */
    margin-top: 2rem;
    padding: 1rem;
    justify-self: center;
}

.week-container {
    width: 90%;
    margin-top: 2rem;
    scroll-margin-top: 2rem;
    padding: 1rem;
    justify-self: center;
}

.week-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    position: sticky;
    top: 0;
    z-index: 2;
    background-color: var(--primary-bg-color);
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--secondary-bg-color);
}

.week-label {
    font-weight: 700;
    font-size: 1.2em;
    margin-right: 5px;
}

.week-widgets {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
}

.week-widget {
    overflow: hidden;
}

.week-days {
    display: flex;
    gap: 10px;
    padding: 10px;
}

.day-container {
    flex: 1;
    padding: .3rem;
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 8px;
}

.day-header {
    width: 3rem;
    grid-column: 1 / 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 8px;
}

.day-strip {
    position: relative;  /* Needed for both events and passed-overlay */
    grid-column: 2 / 3;
    padding-left: 8px;
    min-height: calc(var(--event-row-height) * var(--data-rows, 1));
}

.event {
    position: absolute;
    left: var(--data-start-position);
    right: calc(100% - var(--data-end-position));
    top: calc(var(--data-row) * var(--event-row-height));
    height: calc(var(--event-row-height) - 2px);
    background-color: var(--data-color);
    box-sizing: border-box;
    padding: 2px 6px;
    border-radius: 6px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}


/*
 .o88b.  .d88b.  db       .d88b.  d8888b. .d8888.                  d8888b. d88888b .d8888. d888888b  d888b  d8b   db 
d8P  Y8 .8P  Y8. 88      .8P  Y8. 88  `8D 88'  YP        db        88  `8D 88'     88'  YP   `88'   88' Y8b 888o  88 
8P      88    88 88      88    88 88oobY' `8bo.          88        88   88 88ooooo `8bo.      88    88      88V8o 88 
8b      88    88 88      88    88 88`8b     `Y8b.      C8888D      88   88 88~~~~~   `Y8b.    88    88  ooo 88 V8o88 
Y8b  d8 `8b  d8' 88booo. `8b  d8' 88 `88. db   8D        88        88  .8D 88.     db   8D   .88.   88. ~8~ 88  V888 
 `Y88P'  `Y88P'  Y88888P  `Y88P'  88   YD `8888Y'        VP        Y8888D' Y88888P `8888Y' Y888888P  Y888P  VP   V8P 
 */

body {
    background-color: color-mix(in srgb, var(--primary-overlay-color) 40%, var(--primary-bg-color));
    color: var(--primary-text-color);
}

.week-loading {
    background-color: var(--primary-bg-color);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--secondary-text-color);
    font-size: 1.5em;
}

.week-container {
    background-color: var(--primary-bg-color);
    border: 1px solid var(--secondary-bg-color);
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.week-loaded {
    animation: weekFadeIn 500ms ease-out both;
    will-change: transform, opacity;
}

@keyframes weekFadeIn {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (prefers-reduced-motion: reduce) {
    .week-loaded {
        animation: none;
    }
}

.week-widget {
    border-radius: 999px;
    border: var(--secondary-bg-color) 1px solid;
    padding: .2rem .5rem;
    margin-left: .4rem;
}

.week-widget[data-color="neutral"] {
    color: var(--text-color-neutral);
    border-color: var(--text-color-neutral);
}

.week-widget[data-color="success"] {
    color: var(--text-color-success);
    border-color: var(--text-color-success);
}

.week-widget[data-color="warning"] {
    color: var(--text-color-warning);
    border-color: var(--text-color-warning);
}

.week-widget[data-color="danger"] {
    color: var(--text-color-danger);
    border-color: var(--text-color-danger);
}

.week-widget[data-color="info"] {
    color: var(--text-color-info);
    border-color: var(--text-color-info);
}

.day-passed {
    color: var(--secondary-text-color);
}

.day-today {
    font-weight: 700;
    border: 2px solid var(--primary-text-color);
}

.day-future {
    background-color: inherit;
}

.day-strip {
    background-color: color-mix(in srgb, var(--primary-overlay-color) 40%, var(--primary-bg-color));
    border-left: 2px solid var(--secondary-bg-color);
}

.day-passed > .day-strip {
    color: var(--secondary-text-color);
}

.day-passed > .day-strip::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--secondary-overlay-color);
    opacity: 0.1;
    pointer-events: none; /* Allow clicks to pass through */
}

.day-header-date {
    font-size: 1.2em;
    font-weight: 700;
}

.day-header-dayname {
    font-size: 0.9em;
    color: var(--secondary-text-color);
}

.scroll-to-today {
    border: 1px solid color-mix(in srgb, var(--secondary-overlay-color) 35%, var(--secondary-bg-color));
    border-radius: 999px;
    font-weight: 700;
    color: var(--primary-text-color);
    background: color-mix(in srgb, var(--primary-overlay-color) 55%, var(--primary-bg-color));
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    opacity: 0;
    pointer-events: none;
    cursor: pointer;
    transform: translate(-50%, 8px);
    transition: opacity 200ms ease, transform 200ms ease;
}

.scroll-to-today.is-visible {
    opacity: 1;
    pointer-events: auto;
    transform: translate(-50%, 0);
}

.scroll-to-today:hover {
    background: color-mix(in srgb, var(--secondary-overlay-color) 15%, var(--primary-bg-color));
}

.scroll-to-today:active {
    transform: translate(-50%, 1px);
}
